<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
  </head>
  <body>
    <div id="navbarMenuHeroA" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="mdb.html">
          Home
        </a>
        <a class="navbar-item" href="mix.html">
          Mischen
        </a>
        <a class="navbar-item is-activer" href="#">
          Rezepte
        </a>
        <a class="navbar-item" href="admin.html">
          Admin
        </a>
      </div>
    </div>

    <div class="container is-mt-3">
      <div id="recipes_id">
      </div>
    </div>

    <script>
      var recipes;
      var elements = ["Beschreibung", "Zutaten", "Ausfuehrung", "Stichw√∂rter"];
      $.get('/dorecipes', function(recipes_parse){
        recipes = JSON.parse(recipes_parse)
				for (let b in recipes) {
          //immer checken ob durch drei teilbar ist dann zu tile parent hinzufuegen und zum gesamten hinzufuegen
					let array = recipes[b];
					var name = array.name;
					var description = array.description;
					var ingredients_array = [];
					for (let c in array.ingredients) {
						ingredients_array.push(array.ingredients[c]);
					}
					var direction_a = array.directions;
					var keyword_array = [];
					for (var i in array.keywords) {
						keyword_array.push(array.keywords[i]);
					}

          if (b % 3 == 0) {
            var anc = document.createElement("div");
            anc.className = "tile is-ancestor";
            var vert = document.createElement("div");
            vert.className = "tile is-vertical is-12";
            var til = document.createElement("div");
            til.className = "tile";
          }
          var tile = document.createElement("div");
          tile.className = "tile is-parent is-vertical";
          for (let e = 0; e == 3; e++) {
            var artic = document.createElement("ARTICEL");
            artic.className = "tile is-child";
          }
          //erstelle leeres Panel
          var panel = document.createElement("nav");
          panel.className = "panel";
          //erstelle panel fuer ueberschrift
          var panel_heading = document.createElement("p");
          panel_heading.className = "panel-heading";
          //fuege ueberschrift hinzu
          panel_heading.appendChild(document.createTextNode(name));
          panel.appendChild(panel_heading);
          var navi = document.createElement("p");
          navi.className = "panel-tabs";
          for (let d in elements) {
            var nav_element = document.createElement("a");
            if (d == 0){
              nav_element.className = "is-active"
            }
            var nav_text = document.createTextNode(elements[d]);
            nav_element.appendChild(nav_text);
            navi.appendChild(nav_element)
            nav_element.addEventListener (
               'click',
               function() {           // anonyme Funktion
                  test(name, elements[d]);
               },
               false
            );
          }

          panel.appendChild(navi)

          // body, weil erste selected ist direkt erstes anzeigen andere auch generieren,
          // aber noch nicht anzeigen
          var bodyDes = document.createElement("a");
          bodyDes.className  = "panel-block";
          bodyDes.id = name + "Des";
          var desText = document.createTextNode(description);
          bodyDes.appendChild(desText);
          panel.appendChild(bodyDes);

          tile.appendChild(panel)
          til.appendChild(tile);
          vert.appendChild(til);
          anc.appendChild(vert)
          if (b % 3 == 0) {
            var id_main = document.getElementById("recipes_id");
            id_main.appendChild(anc);
          }
        }
      })

      function test(id, nav) {
        console.log(id)
        console.log(nav)
      }
    </script>
  </body>
</html>
